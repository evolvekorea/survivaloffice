<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=360, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>ë¯¸ë£¬ì´ í…ŒìŠ¤íŠ¸</title>
  <meta name="description" content="ë¯¸ë£¬ì´ í…ŒìŠ¤íŠ¸" />
  <meta name="keywords" content="ì„œë°”ì´ë²Œì˜¤í”¼ìŠ¤,ì„±ê²©í…ŒìŠ¤íŠ¸,ë¯¸ë£¬ì´,ë¯¸ë£¬ì´í…ŒìŠ¤íŠ¸,ë¯¸ë£¬ì´í…ŒìŠ¤íŠ¸ê²°ê³¼,ì—°ì• í…ŒìŠ¤íŠ¸,ì—°ì• mbti,ì—°ì• ì„±ê²©í…ŒìŠ¤íŠ¸,ì‹¬ë¦¬í…ŒìŠ¤íŠ¸,mbtií…ŒìŠ¤íŠ¸" />

  <!-- Google Adsense -->
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4957586937754537" crossorigin="anonymous"></script>
  <meta name="google-adsense-account" content="ca-pub-4957586937754537" />

  <!-- Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-G4TPWGLYLY"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-G4TPWGLYLY');
  </script>

  <!-- Open Graph -->
  <meta property="og:title" content="ë¯¸ë£¬ì´ í…ŒìŠ¤íŠ¸" />
  <meta property="og:description" content="ë¯¸ë£¬ì´ í…ŒìŠ¤íŠ¸" />
  <meta property="og:url" content="https://www.survivaloffice.com/test/mi" />
  <meta property="og:image" content="https://www.survivaloffice.com/images/test002.png" />
  <meta property="og:type" content="website" />

  <!-- Counter API ì„±ëŠ¥ íŒíŠ¸ -->
  <link rel="preconnect" href="https://api.counterapi.dev" crossorigin />
  <link rel="dns-prefetch" href="https://api.counterapi.dev" />

  <!-- âš ï¸ (ì¤‘ìš”) ë™ì  ë¡œë“œ ë°©ì‹ ì“°ë¯€ë¡œ, ì—¬ê¸°ì„œëŠ” Kakao SDK script íƒœê·¸ë¥¼ ë„£ì§€ ì•ŠìŠµë‹ˆë‹¤. -->
  <!-- <script src="https://t1.kakaocdn.net/kakao_js_sdk/2.7.2/kakao.min.js" crossorigin="anonymous"></script> -->

  <link rel="stylesheet" href="style.css" />
</head>

<body class="page" oncontextmenu="return false">
  <!-- ìƒë‹¨ ë„¤ë¹„ -->
  <nav class="top-nav">
    <ul>
      <li><a href="/">Home</a></li>
      <li><a href="/rest/">ë¯¸ë‹ˆê²Œì„</a></li>
      <li><a href="/test/">í…ŒìŠ¤íŠ¸</a></li>
      <li><a href="/work/">ìƒì¡´í‚¤íŠ¸</a></li>
    </ul>
  </nav>

  <!-- ìƒë‹¨ ê´‘ê³  -->
  <div class="ad-container">
    <ins class="adsbygoogle"
         style="display:block; min-height: 90px;"
         data-ad-client="ca-pub-4957586937754537"
         data-ad-slot="9240598215"
         data-ad-format="auto"
         data-full-width-responsive="true"></ins>
  </div>

  <!-- ì°¸ì—¬ì ìˆ˜ ë°°ì§€ -->
  <div id="test-counter"
       class="counter-badge"
       data-counter-namespace="survivaloffice"
       data-counter-key="mi">
    ì´ 0ëª… ì°¸ì—¬
  </div>

  <main class="container">
    <!-- ì‹œì‘ í™”ë©´ -->
    <section id="start-screen" class="start-screen">
      <img src="https://www.survivaloffice.com/images/img_main002.png" alt="ì‹œì‘ ì´ë¯¸ì§€" class="start-image" />
      <button id="start-btn" type="button" class="custom-jelly-button" onclick="startQuiz()">ì‹œì‘í•˜ê¸°</button>
    </section>

    <!-- í”„ë¡œê·¸ë˜ìŠ¤ ë°” -->
    <div class="progress-container" id="progress-container" aria-label="ì§„í–‰ë¥ ">
      <div class="progress-bar" id="progress-bar"></div>
    </div>

    <!-- ì§ˆë¬¸ -->
    <section class="quiz-container" id="quiz-container-1">
      <p><img src="https://www.survivaloffice.com/images/q1_002.png" alt="ë¬¸ì œ1" /></p>
      <button type="button" onclick="checkAnswer(1, 1)" class="custom-jelly-button mt-3">ë°”ë¡œ ì˜ˆì•½í•˜ì</button>
      <button type="button" onclick="checkAnswer(1, 2)" class="custom-jelly-button">ì•„ì§ ì•ˆ ê¸‰í•˜ë‹ˆê¹Œ ë‚˜ì¤‘ì— í•˜ì</button>
    </section>

    <section class="quiz-container" id="quiz-container-2">
      <p><img src="https://www.survivaloffice.com/images/q2_002.png" alt="ë¬¸ì œ2" /></p>
      <button type="button" onclick="checkAnswer(2, 1)" class="custom-jelly-button mt-3">ì´ì°¸ì— ì§‘ ì²­ì†Œ ì‹¹ í•´ë²„ë¦¬ì!</button>
      <button type="button" onclick="checkAnswer(2, 2)" class="custom-jelly-button mt-3">ë‹¤ìŒì— í•˜ì. êµ³ì´ ì§€ê¸ˆ ì•ˆ ë¶ˆëŸ¬ë„ ë˜ë‹ˆê¹Œ</button>
    </section>

    <section class="quiz-container" id="quiz-container-3">
      <p><img src="https://www.survivaloffice.com/images/q3_002.png" alt="ë¬¸ì œ3" /></p>
      <button type="button" onclick="checkAnswer(3, 1)" class="custom-jelly-button mt-3">ì§€ê¸ˆ ì†ì§ˆí•´ì•¼ê² ë‹¤!</button>
      <button type="button" onclick="checkAnswer(3, 2)" class="custom-jelly-button mt-3">ê·€ì°®ì•„... ë‚˜ì¤‘ì— í•˜ê³ <br>ì˜¤ëŠ˜ì€ ë°°ë‹¬ ì‹œì¼œ ë¨¹ì–´ì•¼ì§€.</button>
    </section>

    <section class="quiz-container" id="quiz-container-4">
      <p><img src="https://www.survivaloffice.com/images/q4_002.png" alt="ë¬¸ì œ4" /></p>
      <button type="button" onclick="checkAnswer(4, 1)" class="custom-jelly-button mt-3">ë¹¨ë˜ ì–¼ë¥¸ ëë‚´ê³  ëª°ì•„ë³´ì!</button>
      <button type="button" onclick="checkAnswer(4, 2)" class="custom-jelly-button mt-3">ë¹¨ë˜ëŠ” ë‚´ì¼ í•˜ì. ë“œë¼ë§ˆë¶€í„° ë‹¬ë ¤ì•¼ì§€!</button>
    </section>

    <section class="quiz-container" id="quiz-container-5">
      <p><img src="https://www.survivaloffice.com/images/q5_002.png" alt="ë¬¸ì œ5" /></p>
      <button type="button" onclick="checkAnswer(5, 1)" class="custom-jelly-button mt-3">ì§€ê¸ˆ ë°”ë¡œ ì •í•˜ê³  ì£¼ë¬¸í•´ë²„ë¦¬ì!</button>
      <button type="button" onclick="checkAnswer(5, 2)" class="custom-jelly-button mt-3">ì•„ì§ ë©°ì¹  ë‚¨ì•˜ì–ì•„. ë‚˜ì¤‘ì— ìƒê°í•˜ì.</button>
    </section>

    <section class="quiz-container" id="quiz-container-6">
      <p><img src="https://www.survivaloffice.com/images/q6_002.png" alt="ë¬¸ì œ6" /></p>
      <button type="button" onclick="checkAnswer(6, 1)" class="custom-jelly-button mt-3">ë°”ë¡œ ì‹œì‘í•´ì„œ í•˜ë£¨ë¥¼ ê¸°ë¡í•´ë³´ì!</button>
      <button type="button" onclick="checkAnswer(6, 2)" class="custom-jelly-button mt-3">ì²« ì¥ ì“°ëŠ” ê²Œ ì™œ ì´ë ‡ê²Œ ì–´ë µì§€â€¦<br>ì¡°ê¸ˆ ë” ìƒê°í•´ë³´ì.</button>
    </section>

    <section class="quiz-container" id="quiz-container-7">
      <p><img src="https://www.survivaloffice.com/images/q7_002.png" alt="ë¬¸ì œ7" /></p>
      <button type="button" onclick="checkAnswer(7, 1)" class="custom-jelly-button mt-3">ê·¸ë˜ë„ ê¶ê¸ˆí•˜ë‹ˆê¹Œ ê°€ì„œ ë¨¹ê³  ì˜¤ì!</button>
      <button type="button" onclick="checkAnswer(7, 2)" class="custom-jelly-button mt-3">ë‹¤ìŒì— ì‚¬ëŒ ì—†ì„ ë•Œ ê°€ì•¼ì§€â€¦</button>
    </section>

    <section class="quiz-container" id="quiz-container-8">
      <p><img src="https://www.survivaloffice.com/images/q8_002.png" alt="ë¬¸ì œ8" /></p>
      <button type="button" onclick="checkAnswer(8, 1)" class="custom-jelly-button mt-3">ë§ˆì¹¨ ì¬ë£Œë„ ìˆìœ¼ë‹ˆ ì§€ê¸ˆ ì‹œì‘í•´ë³´ì!</button>
      <button type="button" onclick="checkAnswer(8, 2)" class="custom-jelly-button mt-3">ë‚˜ì¤‘ì— ì‹œê°„ ë‚  ë•Œ í•´ì•¼ê² ë‹¤</button>
    </section>

    <section class="quiz-container" id="quiz-container-9">
      <p><img src="https://www.survivaloffice.com/images/q9_002.png" alt="ë¬¸ì œ9" /></p>
      <button type="button" onclick="checkAnswer(9, 1)" class="custom-jelly-button mt-3">ìë£Œë¼ë„ ì¡°ê¸ˆì”© ëª¨ì•„ë‘ì.</button>
      <button type="button" onclick="checkAnswer(9, 2)" class="custom-jelly-button mt-3">ì¼ë‹¨ ê¸´ì¥ì„ í’€ê³  ë‹¥ì¹˜ë©´ ì§‘ì¤‘í•´ì„œ í• ë˜.</button>
    </section>

    <section class="quiz-container" id="quiz-container-10">
      <p><img src="https://www.survivaloffice.com/images/q10_002.png" alt="ë¬¸ì œ10" /></p>
      <button type="button" onclick="checkAnswer(10, 1)" class="custom-jelly-button mt-3">ì§€ê¸ˆ ë°”ë¡œ ì „í™” ë“œë¦¬ì.</button>
      <button type="button" onclick="checkAnswer(10, 2)" class="custom-jelly-button mt-3">ë‚˜ì¤‘ì— ì‹œê°„ ì—¬ìœ  ìˆì„ ë•Œ í•´ì•¼ì§€â€¦</button>
    </section>

    <!-- ê²°ê³¼ -->
    <section id="result-container" class="result-container" style="display:none;">
      <p id="result-text"></p>
      <img id="result-image" src="" alt="ê²°ê³¼ ì´ë¯¸ì§€" />
      <div class="result-actions">
        <button id="share-kakao" type="button" class="custom-jelly-button">ì¹´ì¹´ì˜¤í†¡ ê³µìœ í•˜ê¸°</button>
        <button type="button" class="custom-jelly-button" onclick="location.href='index.html'">ë‹¤ì‹œ í•´ë³´ê¸°</button>
        <button type="button" class="custom-jelly-button" onclick="location.href='/'">ë‹¤ë¥¸ í…ŒìŠ¤íŠ¸ í•´ë³´ê¸°</button>
      </div>
    </section>
  </main>

  <!-- í•˜ë‹¨ ê´‘ê³  -->
  <div class="footer-ad-container">
    <ins class="adsbygoogle" style="display:block"
         data-ad-client="ca-pub-4957586937754537"
         data-ad-slot="9931828353"
         data-ad-format="auto"
         data-full-width-responsive="true"></ins>
  </div>

  <!-- ì¿ íŒ¡ -->
  <p class="sr-only">ì¿ íŒ¡ ê´‘ê³ </p>
  <script src="https://ads-partners.coupang.com/g.js"></script>
  <script>
    new PartnersCoupang.G({ id: 810614, trackingCode: "AF4453761", subId: null, template: "carousel", width: "360", height: "100" });
  </script>

  <!-- ì• ë“œì„¼ìŠ¤ push -->
  <script>
    document.addEventListener("contextmenu", e => e.preventDefault());
    document.addEventListener("DOMContentLoaded", () => {
      try {
        (adsbygoogle = window.adsbygoogle || []).push({});
        window.addEventListener("load", () => {
          (adsbygoogle = window.adsbygoogle || []).push({});
        });
      } catch (e) {
        console.error("ì• ë“œì„¼ìŠ¤ ê´‘ê³  ë¡œë“œ ì‹¤íŒ¨:", e);
      }
    });
  </script>

  <!-- ===== í€´ì¦ˆ ë¡œì§ ===== -->
  <script>
    let currentQuestion = 0;
    let score = 0;

    const correctAnswers = [
      [1],[1],[1],[1],[1],[1],[1],[1],[1],[1]
    ];

    function startQuiz() {
      document.getElementById("start-screen").style.display = "none";
      document.getElementById("progress-container").style.display = "block";
      document.getElementById("quiz-container-1").style.display = "block";
      currentQuestion = 1;
      updateProgressBar();
    }

    function showQuestion(questionNumber) {
      for (let i = 1; i <= 10; i++) {
        const el = document.getElementById(`quiz-container-${i}`);
        if (el) el.style.display = "none";
      }
      document.getElementById(`quiz-container-${questionNumber}`).style.display = "block";
      currentQuestion = questionNumber;
      updateProgressBar();
    }

    function checkAnswer(questionNumber, selectedOption) {
      const currentCorrect = correctAnswers[questionNumber - 1];
      if (currentCorrect.includes(selectedOption)) score++;

      document.getElementById(`quiz-container-${questionNumber}`).style.display = "none";

      if (questionNumber < 10) {
        showQuestion(questionNumber + 1);
      } else {
        showResult(score);
      }
    }

    function showResult(score) {
      const resultContainer = document.getElementById("result-container");
      const resultImage = document.getElementById("result-image");
      const resultText = document.getElementById("result-text");

      const map = {
        10: "https://www.survivaloffice.com/images/img002_100.png",
        9:  "https://www.survivaloffice.com/images/img002_90.png",
        8:  "https://www.survivaloffice.com/images/img002_80.png",
        7:  "https://www.survivaloffice.com/images/img002_70.png",
        6:  "https://www.survivaloffice.com/images/img002_60.png",
        5:  "https://www.survivaloffice.com/images/img002_50.png",
        4:  "https://www.survivaloffice.com/images/img002_40.png",
        3:  "https://www.survivaloffice.com/images/img002_30.png",
        2:  "https://www.survivaloffice.com/images/img002_20.png",
        1:  "https://www.survivaloffice.com/images/img002_10.png",
        0:  "https://www.survivaloffice.com/images/img002_0.png",
      };

      const imgUrl = map[score] || map[0];
      resultImage.src = imgUrl;

      // âœ… ê³µìœ ìš© ì €ì¥
      window.currentResultImageUrl = imgUrl;
      window.currentScore = score;

      resultText.textContent = "";
      resultContainer.style.display = "block";
    }

    function updateProgressBar() {
      const progressBar = document.getElementById("progress-bar");
      const total = 10;
      const progress = (currentQuestion / total) * 100;
      progressBar.style.width = progress + "%";
    }
  </script>

  <!-- ===== ì°¸ì—¬ì ì¹´ìš´í„° (CountAPI) ===== -->
  <script>
    const COUNTER_BASE = 'https://api.counterapi.dev/v1';
    const ONLY_ONCE_PER_SESSION = false;

    function counterPath(ns, key) {
      return `${COUNTER_BASE}/${encodeURIComponent(ns)}/${encodeURIComponent(key)}/`;
    }

    function getCounterConfig() {
      const el = document.getElementById("test-counter");
      return {
        el,
        ns: el?.dataset.counterNamespace || "survivaloffice",
        key: el?.dataset.counterKey || "mi",
      };
    }

    function cacheKey(ns, key){ return `counter_${ns}_${key}`; }

    function getCachedCount(ns, key, maxAgeMs = 10 * 60 * 1000){
      try{
        const raw = localStorage.getItem(cacheKey(ns,key));
        if(!raw) return null;
        const obj = JSON.parse(raw);
        if(Date.now() - obj.t > maxAgeMs) return null;
        return typeof obj.v === 'number' ? obj.v : null;
      }catch{ return null; }
    }

    function setCachedCount(ns, key, val){
      try{
        localStorage.setItem(cacheKey(ns,key), JSON.stringify({ v: Number(val)||0, t: Date.now() }));
      }catch{}
    }

    async function fetchCount(ns, key) {
      const url = counterPath(ns, key);
      try {
        const r = await fetch(url, { cache: 'no-store', headers: { 'accept': 'application/json' } });
        if (!r.ok) return 0;
        const data = await r.json();
        return (typeof data.count === 'number') ? data.count :
               (typeof data.value === 'number') ? data.value : 0;
      } catch (e) {
        console.warn('[counter] fetch failed:', e);
        return 0;
      }
    }

    async function hitCount(ns, key) {
      const url = `${counterPath(ns, key)}up`;
      try {
        const r = await fetch(url, { cache: 'no-store', headers: { 'accept': 'application/json' } });
        if (!r.ok) return null;
        const data = await r.json();
        return (typeof data.count === 'number') ? data.count :
               (typeof data.value === 'number') ? data.value : null;
      } catch (e) {
        console.warn('[counter] hit failed:', e);
        return null;
      }
    }

    function shouldIncreaseThisSession(ns, key) {
      if (!ONLY_ONCE_PER_SESSION) return true;
      const flag = `counted_${ns}_${key}`;
      if (sessionStorage.getItem(flag) === "1") return false;
      sessionStorage.setItem(flag, "1");
      return true;
    }

    function renderCount(el, n) {
      if (!el) return;
      el.textContent = `ì´ ${Number(n).toLocaleString()}ëª… ì°¸ì—¬`;
      el.setAttribute("data-count", String(n));
      const { ns, key } = getCounterConfig();
      if (ns && key && typeof n === 'number') setCachedCount(ns, key, n);
    }

    (async function initCounter() {
      const { el, ns, key } = getCounterConfig();
      if (!el) return;

      const cached = getCachedCount(ns, key);
      if (cached !== null) renderCount(el, cached);

      const fresh = await fetchCount(ns, key);
      renderCount(el, fresh);

      const startBtnEl = document.getElementById("start-btn");
      if (startBtnEl) {
        startBtnEl.addEventListener("click", async () => {
          try {
            if (shouldIncreaseThisSession(ns, key)) {
              const after = await hitCount(ns, key);
              if (after !== null) renderCount(el, after);
            }
          } catch (e) {
            console.warn("[counter] increase on click failed:", e);
          }
        }, { once: false });
      }
    })();
  </script>

  <!-- âœ… ì¹´ì¹´ì˜¤ SDK ë™ì  ë¡œë“œ + ê³µìœ í•˜ê¸° ë¡œì§ (ë„¤ê°€ ì¤€ ë°©ì‹) -->
  <script>
    // ---------- ì¹´ì¹´ì˜¤ SDK ----------
    async function loadKakaoSDK() {
      return new Promise((resolve, reject) => {
        if (window.Kakao && Kakao.isInitialized()) { resolve(); return; }
        const script = document.createElement("script");
        script.src = "https://developers.kakao.com/sdk/js/kakao.min.js";
        script.onload = () => {
          if (!window.Kakao) { reject("âŒ Kakao ê°ì²´ê°€ ë¡œë“œë˜ì§€ ì•ŠìŒ"); return; }
          Kakao.init("eee6c2e01641161de9f217ba99c6a0da");
          resolve();
        };
        script.onerror = () => reject("âŒ Kakao SDK ë¡œë“œ ì‹¤íŒ¨");
        document.head.appendChild(script);
      });
    }

    // ë¡œë“œ/ì´ˆê¸°í™”
    loadKakaoSDK().catch(console.error);

    // ê³µìœ  ë²„íŠ¼ ì—°ê²°
    document.addEventListener("DOMContentLoaded", () => {
      const btn = document.getElementById("share-kakao");
      if (!btn) return;

      btn.addEventListener("click", async () => {
        try {
          await loadKakaoSDK(); // í˜¹ì‹œ ëŠ¦ê²Œ ë¡œë“œë  ìˆ˜ ìˆìœ¼ë‹ˆ ë³´ì¥

          const imgUrl = window.currentResultImageUrl || "https://www.survivaloffice.com/images/test002.png";
          const score = (typeof window.currentScore === "number") ? window.currentScore : null;

          const shareUrl = "https://www.survivaloffice.com/test/mi";
          const title = "ë¯¸ë£¬ì´ í…ŒìŠ¤íŠ¸ ê²°ê³¼";
          const desc = (score !== null) ? `ë‚´ ì ìˆ˜ëŠ” ${score}ì ! ë„ˆë„ í•´ë´ ğŸ‘‡` : "ë„ˆë„ í•´ë´ ğŸ‘‡";

          Kakao.Share.sendDefault({
            objectType: "feed",
            content: {
              title: title,
              description: desc,
              imageUrl: imgUrl,   // âœ… ê²°ê³¼ ì´ë¯¸ì§€
              link: { mobileWebUrl: shareUrl, webUrl: shareUrl }
            },
            buttons: [
              {
                title: "í…ŒìŠ¤íŠ¸ í•˜ëŸ¬ê°€ê¸°",
                link: { mobileWebUrl: shareUrl, webUrl: shareUrl }
              }
            ]
          });
        } catch (e) {
          console.error("ì¹´ì¹´ì˜¤ ê³µìœ  ì‹¤íŒ¨:", e);
          alert("ì¹´ì¹´ì˜¤ ê³µìœ  ì„¤ì •ì„ í™•ì¸í•´ì£¼ì„¸ìš”. (ë„ë©”ì¸ ë“±ë¡/í‚¤ í™•ì¸)");
        }
      });
    });
  </script>
</body>
</html>
