<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=360, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>ìº”ë”” ì„±ê²© í…ŒìŠ¤íŠ¸</title>
  <meta name="description" content="ìº”ë”” ì„±ê²© í…ŒìŠ¤íŠ¸" />
  <meta name="keywords" content="ì„œë°”ì´ë²Œì˜¤í”¼ìŠ¤,ì„±ê²©í…ŒìŠ¤íŠ¸,ìº”ë””,ìº”ë””ì„±ê²©í…ŒìŠ¤íŠ¸,ìº”ë””ì„±ê²©í…ŒìŠ¤íŠ¸ê²°ê³¼,ì—°ì• í…ŒìŠ¤íŠ¸,ì—°ì• mbti,ì—°ì• ì„±ê²©í…ŒìŠ¤íŠ¸,ì‹¬ë¦¬í…ŒìŠ¤íŠ¸,mbtií…ŒìŠ¤íŠ¸" />

  <!-- Google Adsense -->
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4957586937754537" crossorigin="anonymous"></script>
  <meta name="google-adsense-account" content="ca-pub-4957586937754537" />

  <!-- Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-G4TPWGLYLY"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-G4TPWGLYLY');
  </script>

  <!-- Open Graph -->
  <meta property="og:title" content="ìº”ë”” ì„±ê²© í…ŒìŠ¤íŠ¸" />
  <meta property="og:description" content="ìº”ë”” ì„±ê²© í…ŒìŠ¤íŠ¸" />
  <meta property="og:url" content="https://www.survivaloffice.com/test/candy" />
  <meta property="og:image" content="https://www.survivaloffice.com/images/test001.png" />
  <meta property="og:type" content="website" />

  <!-- Counter API ì„±ëŠ¥ íŒíŠ¸ -->
  <link rel="preconnect" href="https://api.counterapi.dev" crossorigin />
  <link rel="dns-prefetch" href="https://api.counterapi.dev" />
  <link rel="stylesheet" href="style.css" />
</head>

<body class="page" oncontextmenu="return false">
  <!-- ìƒë‹¨ ë„¤ë¹„ -->
  <nav class="top-nav">
    <ul>
      <li><a href="/">Home</a></li>
      <li><a href="/rest/">ë¯¸ë‹ˆê²Œì„</a></li>
      <li><a href="/test/">í…ŒìŠ¤íŠ¸</a></li>
      <li><a href="/work/">ìƒì¡´í‚¤íŠ¸</a></li>
    </ul>
  </nav>

  <!-- ìƒë‹¨ ê´‘ê³  -->
  <div class="ad-container">
    <ins class="adsbygoogle"
         style="display:block; min-height: 90px;"
         data-ad-client="ca-pub-4957586937754537"
         data-ad-slot="9240598215"
         data-ad-format="auto"
         data-full-width-responsive="true"></ins>
  </div>

  <!-- ì°¸ì—¬ì ìˆ˜ ë°°ì§€ -->
  <div id="test-counter"
       class="counter-badge"
       data-counter-namespace="survivaloffice"
       data-counter-key="candy">
    ì´ 0ëª… ì°¸ì—¬
  </div>

  <!-- body íƒœê·¸ style background-color ì§€ì •ìœ¼ë¡œ ë°°ê²½ìƒ‰ ë³€ê²½-->
<body class="container" style="background-color:#ffffff">


     <!--ì‹œì‘í™”ë©´-->
    <article class="start">
        <img id="img_main" class="mt-3" src="https://www.survivaloffice.com/images/img_main001.png">
         <button type="button" class="btn btn-info mt-3" onclick='start();' style="font-size:large; font-weight: bold; color: black; background-color: rgb(251, 255, 195); border-color: rgb(0, 0, 0); width: 350px; height: 50px; margin: 0 auto;">í…ŒìŠ¤íŠ¸ ì‹œì‘í•˜ê¸°</button>
    </article>
    <!--ë¬¸ì œí™”ë©´-->
    <article class="question">
        <div class="progress mt-5">
            <div class="progress-bar" role="progressbar" style="width: calc(100/12*1%)" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"></div>
        </div>
        <h6 style="font-weight: bold; color: black;" class="text-center mt-5" id="title">ë¬¸ì œ</h6>
        <input id="type" type="hidden" value="EI">
        <button id="A" type="button" class="btn btn-info mt-5" style="font-size:smaller; font-weight: bold; color: black; background-color: rgb(238, 255, 249); border-color: rgb(83, 255, 196); width: 350px; height: 100px; margin: 0 auto;">Primary</button>
        <button id="B" type="button" class="btn btn-info mt-3" style="font-size:smaller; font-weight: bold; color: black; background-color: rgb(255, 253, 244); border-color: rgb(255, 225, 89); width: 350px; height: 100px; margin: 0 auto;">Primary</button>

        </article>
    <!--ê²°ê³¼í™”ë©´-->
    <article class="result">
        <img id="img" class="mt-5" src="" alt="animal">
        

                <!-- Go to www.addthis.com/dashboard to customize your tools -->
                <div class="addthis_inline_share_toolbox_ougq mt-3"></div>
                
       <button type="button" class="btn btn-info mt-3 custom-button" onclick="location.href='test001.html'" style="font-size:large; font-weight: bold; color: black;background-color: rgb(255, 253, 244); border-color: rgb(255, 225, 89); border-radius: 0px; border-width: 1px;">ë‹¤ì‹œ í•´ë³´ê¸°</button>

        <!-- ë‹¤ë¥¸í…ŒìŠ¤íŠ¸í•´ë³´ê¸° ë²„íŠ¼ì— í´ë˜ìŠ¤ ì¶”ê°€ -->
        <button type="button" class="btn btn-info mt-3 custom-button" onclick="location.href='/'" style="font-size:large; font-weight: bold; color: black; background-color: rgb(238, 255, 249); border-color: rgb(83, 255, 196); border-radius: 0px; border-width: 1px;">ë‹¤ë¥¸ í…ŒìŠ¤íŠ¸ í•´ë³´ê¸°</button>
                        
  
            
    </article>


    <article class="coupang_ad mt-3">
<a href="https://link.coupang.com/a/bDcHRV" target="_blank" referrerpolicy="unsafe-url"><img src="https://ads-partners.coupang.com/banners/781196?subId=&traceId=V0-301-bae0f72e5e59e45f-I781196&w=320&h=100" alt=""></a>
    <script type="text/javascript" src="//t1.daumcdn.net/kas/static/ba.min.js" async></script>
    <!--ê° íƒ€ì…ì˜ ì ìˆ˜ë¥¼ ì €ì¥í•˜ëŠ” input íƒœê·¸(hiddenìœ¼ë¡œ ì•ˆë³´ì„)-->
    <input type="hidden" id="EI" value="0">
    <input type="hidden" id="SN" value="0">
    <input type="hidden" id="TF" value="0">
    <input type="hidden" id="JP" value="0">

    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx" crossorigin="anonymous"></script>

    <script>
        // ë¬¸ì œ ë²ˆí˜¸ë¥¼ ë‚˜íƒ€ë‚´ëŠ” num ë³€ìˆ˜
          var num = 1;
        // ë¬¸ì œ ë²ˆí˜¸ë³„ ì§ˆë¬¸ì„ ì €ì¥í•˜ëŠ” ìë°”ìŠ¤í¬ë¦½íŠ¸ ê°ì²´ q
                 var q = {
              1: {"title": "ì¹œêµ¬ì™€ ê±°ë¦¬ë¥¼ êµ¬ê²½í•˜ë©° ê±·ëŠ”ë°<br><br>'í¸ì˜ì  ë³´ì´ë©´ ë“¤ë¥´ì'ë¼ê³  í•  ë•Œ<br><br>ë‚˜ì˜ ëŒ€ë‹µì€?", "type": "JP", "A": "ê·¸ë˜ ê°€ë‹¤ ë³´ë©´ ìˆê² ì§€", "B": "ê·¼ì²˜ì— í¸ì˜ì  ìˆë‚˜ ê²€ìƒ‰í•´ ë³¼ê²Œ"},
             2: {"title": "ë°”ëŒì´ ë§ì´ ë¶€ëŠ” ê±°ë¦¬ë¥¼ ì§€ë‚  ë•Œ<br><br>ë“œëŠ” ìƒê°ì€", "type": "SN", "A": "ì™œ ì´ë ‡ê²Œ ë°”ëŒì´ ë§ì´ ë¶ˆì§€?", "B": "ê°•í’ì— ì°½ë¬¸ì´ ê¹¨ì§€ê³ <br>ê°„íŒì´ ë‚ ì•„ë‹¤ë‹ˆëŠ” ìƒìƒì„ í•œë‹¤"},
             3: {"title": "ì˜¤ëŠ˜ì€ ë¬´ì¡°ê±´<br><br>ë¶„ë¦¬ìˆ˜ê±°ë¥¼ í•˜ê² ë‹¤ ë‹¤ì§í–ˆëŠ”ë°<br><br>ë§‰ìƒ ì§‘ì— ì˜¤ë‹ˆ ë„ˆë¬´ ê·€ì°®ì„ ë•Œ ", "type": "JP", "A": "ë‹¤ìŒì— í•œë‹¤", "B": "ì˜¤ëŠ˜ í•˜ê¸°ë¡œ í–ˆìœ¼ë‹ˆ ê·¸ëƒ¥ í•œë‹¤"},
             4: {"title": "í•˜ë£¨ ë™ì•ˆ êµìœ¡ì„ ë°›ìœ¼ëŸ¬ ì˜¨ ë‚˜<br><br>ì‰¬ëŠ” ì‹œê°„ ë‚˜ì˜ ëª¨ìŠµì€", "type": "EI", "A": "ì–˜ê¸°í•  ë§Œí•œ ì‚¬ëŒì´ ìˆëŠ”ì§€ ì£¼ìœ„ë¥¼ ë‘˜ëŸ¬ë³¸ë‹¤", "B": "íœ´ëŒ€í°ì„ ë³´ë©° ì‹œê°„ì„ ë³´ë‚¸ë‹¤"},             
             5: {"title": "ì£¼ë§ì„ ë³´ë‚´ëŠ” ë‚´ ëª¨ìŠµê³¼ ê°€ê¹Œìš´ ê²ƒì€?", "type": "EI", "A": "ì§‘ì—ë§Œ ìˆëŠ” ì‹œê°„ì´ ì•„ê¹Œì›Œ<br>ë¬´ì¡°ê±´ ë°–ì— ë‚˜ê°€ì„œ ë…¼ë‹¤", "B": "í•˜ë£¨ëŠ” ë¬´ì¡°ê±´ ì§‘ì—ì„œ ì‰¬ë©´ì„œ<br>í˜¼ìë§Œì˜ ì‹œê°„ì„ ê°–ëŠ”ë‹¤"},
             6: {"title":"ì´ë£¨ì§€ ëª»í•  ê±°ë¼ ìƒê°í–ˆë˜<br><br>ë²„í‚·ë¦¬ìŠ¤íŠ¸ ì¤‘ í•œ ê°€ì§€ë¥¼ ë‹¬ì„±í•˜ê³ <br><br>ëˆˆë¬¼ í˜ë¦¬ëŠ” ì‚¬ëŒì„ ë³¼ ë•Œ", "type": "TF", "A": "ì–¼ë§ˆë‚˜ ê¸°ë¶„ì´ ì¢‹ì„ê¹Œ<br>ê·¸ ì‚¬ëŒì˜ ê°ì •ì´ ì „í•´ì ¸ ë­‰í´í•´ì§„ë‹¤", "B": "ëª» ì´ë£° ì¤„ ì•Œì•˜ë˜ ëª©í‘œë¥¼<br>ì´ë£¨ì—ˆë‹¤ë‹ˆ ëŒ€ë‹¨í•˜ë‹¤"},
             7: {"title": "ëˆ„ê°€ ê¸¸ì„ ë¬¼ì–´ì„œ ì•Œë ¤ì¤¬ëŠ”ë°<br><br>í•œ ì‹œê°„ ë’¤ì— ê·¸ ì‚¬ëŒì„ ì¹´í˜ì—ì„œ ë§ˆì£¼ì³¤ì„ ë•Œ", "type": "EI", "A": "ë°˜ê°€ì›Œì„œ ë¨¼ì € ì¸ì‚¬ë¥¼ í•œë‹¤", "B": "ì•„ëŠ” ì²™ì€ í•˜ì§€ ì•Šê³ <br>ì € ì‚¬ëŒë„ ì—¬ê¸° ì™”êµ¬ë‚˜ ìƒê°ë§Œ í•œë‹¤"},
            8: {"title": "ì§€í•˜ì²  ì—­ ì•ì—ì„œ ì „ë‹¨ì§€ë¥¼ ë‚˜ëˆ ì£¼ëŠ”ë°<br><br>ë‚˜ë§Œ ì•ˆ ì¤„ ë•Œ", "type": "SN", "A": "ì˜¤ ë‚˜ëŠ” ì•ˆ ì£¼ë„¤", "B": "ì™œ ë‚˜ë§Œ ì•ˆ ì¤€ ê±´ì§€ ê¶ê¸ˆí•˜ë‹¤"},
            9: {"title": "ì†Œí’ˆ ìˆì—ì„œ êµ¬ê²½ ì¤‘ì¸ ë‚˜<br><br>ë¬¼ê±´ì„ ì‚¬ëŠ” ê¸°ì¤€ì€?", "type": "TF", "A": "ê·€ì—½ê±°ë‚˜ ì˜ˆì˜ê±°ë‚˜<br>ë””ìì¸ì´ ë§ˆìŒì— ë“œëŠ”ê²ƒ", "B": "ì§€ê¸ˆ ë‚˜ì—ê²Œ í•„ìš”í•˜ê³  ì‹¤ìš©ì ì¸ ê²ƒ"},
         10: {"title": "ì¶œê·¼ê¸¸. ì§€í•˜ì² ì„ íƒ€ëŸ¬<br><br>ë›°ì–´ê°€ëŠ” ì‚¬ëŒë“¤ì„ ë³¼ ë•Œ", "type": "SN", "A": "ì§€í•˜ì²  ì¤„ ê¸¸ê² ë‹¤", "B": "ì‚¬ëŒì´ ë§ì•„ ë¬¸ ì•ì— ê»´ì„œ ê°€ëŠ”<br>ìƒìƒì„ í•œë‹¤"},
            11: {"title": "ì¹œêµ¬ì™€ ë¦´ìŠ¤ë¥¼ ì°ëŠ”ë°<br><br>'ì´ê²Œ ë” ì¬ë°Œê² ë‹¤ ì´ê±¸ë¡œ ë°”ê¾¸ì'ë¼ê³  í•  ë•Œ", "type": "JP", "A": "ê·¸ë˜? ê·¸ëŸ¼ ê·¸ê±¸ë¡œ ì°ì", "B": "ì¼ë‹¨ í•˜ë˜ ê±° ë§ˆë¬´ë¦¬í•˜ê³  í•˜ì"},
              12: {"title": "ë§¤ì¼ ë”¸ê¸° ì‚¬íƒ•ë§Œ ë¨¹ë˜ ì¹œêµ¬ê°€<br><br>ê°‘ìê¸° ì˜¤ë Œì§€ ì‚¬íƒ•ì„ ë¨¹ê³  ìˆëŠ” ê±¸ ë´¤ì„ ë•Œ", "type": "TF", "A": "ì˜¤ ì˜¤ëŠ˜ì€ ì˜¤ë Œì§€ë„¤!", "B": "ì™œ ì˜¤ëŠ˜ì€ ì˜¤ë Œì§€ì¸ì§€ ë„ˆë¬´ ê¶ê¸ˆí•˜ë‹¤"}
        }




        // MBTI ê²°ê³¼ë³„ ë™ë¬¼&ì„¤ëª…ì„ ì €ì¥í•˜ëŠ” ìë°”ìŠ¤í¬ë¦½íŠ¸ ê°ì²´ result
        var result = {
            "ISTJ": {"img":"https://www.survivaloffice.com/images/img_istj001.png"},
            "ISFJ": {"img":"https://www.survivaloffice.com/images/img_isfj001.png"},
            "INFJ": {"img":"https://www.survivaloffice.com/images/img_infj001.png"},
            "INTJ": {"img":"https://www.survivaloffice.com/images/img_intj001.png"},

            "ISTP": {"img":"https://www.survivaloffice.com/images/img_istp001.png"},
            "ISFP": {"img":"https://www.survivaloffice.com/images/img_isfp001.png"},
            "INFP": {"img":"https://www.survivaloffice.com/images/img_infp001.png"},
            "INTP": {"img":"https://www.survivaloffice.com/images/img_intp001.png"},
            "ESTP": {"img":"https://www.survivaloffice.com/images/img_estp001.png"},
            "ESFP": {"img":"https://www.survivaloffice.com/images/img_esfp001.png"},
            "ENFP": {"img":"https://www.survivaloffice.com/images/img_enfp001.png"},
            "ENTP": {"img":"https://www.survivaloffice.com/images/img_entp001.png"},

            "ESTJ": {"img":"https://www.survivaloffice.com/images/img_estj001.png"},
            "ESFJ": {"img":"https://www.survivaloffice.com/images/img_esfj001.png"},
            "ENFJ": {"img":"https://www.survivaloffice.com/images/img_enfj001.png"},
            "ENTJ": {"img":"https://www.survivaloffice.com/images/img_entj001.png"},
        }
        // ì‹œì‘ ë²„íŠ¼ì„ í´ë¦­í•˜ë©´ ì‹œì‘í™”ë©´ ìˆ¨ê¸°ê³  ì§ˆë¬¸í™”ë©´ ë³´ì—¬ì£¼ê¸°
        function start(){
            $(".start").hide();
            $(".question").show();
            next();
        }
        // A ë²„íŠ¼ í´ë¦­í•˜ë©´ í•´ë‹¹ íƒ€ì… ê°’ì„ ê°€ì ¸ì™€ì„œ ê°’ 1 ì¦ê°€ í›„ next()
        $("#A").click(function(){
            var type = $("#type").val();
            var preValue = $("#"+type).val();
            $("#"+type).val(parseInt(preValue)+1);
            next();
        });
        // B ë²„íŠ¼ í´ë¦­í•˜ë©´ ê°’ ì¦ê°€ ì—†ì´ next()
        $("#B").click(function(){
            next();
        });
        function next(){
            // ë§ˆì§€ë§‰ ë¬¸ì œì¸ ê²½ìš°
            if(num==13){
                // ì§ˆë¬¸ì€ ìˆ¨ê¸°ê³  ê²°ê³¼ í™”ë©´ ë³´ì—¬ì£¼ê¸°
                $(".question").hide();
                $(".result").show();

                var mbti = "";
                
                // ì‚¼í•­ ì—°ì‚°ìë¥¼ ì‚¬ìš©í•´ì„œ MBTI ê³„ì‚°
                ($("#EI").val()<2) ? mbti+="I" : mbti+="E";
                ($("#SN").val()<2) ? mbti+="N" : mbti+="S";
                ($("#TF").val()<2) ? mbti+="T" : mbti+="F";
                ($("#JP").val()<2) ? mbti+="J" : mbti+="P";
                
                // ê³„ì‚°ëœ MBTIë¡œ ì´ë¯¸ì§€, ë™ë¬¼, ì„¤ëª… ê°’ ë³€ê²½
                $("#img").attr("src",result[mbti]["img"]);
                $("#animal").html(result[mbti]["animal"]);
                $("#explain").html(result[mbti]["explain"]);
            } // ë§ˆì§€ë§‰ ë¬¸ì œê°€ ì•„ë‹Œ ê²½ìš°
            else{
                // í”„ë¡œê·¸ë˜ìŠ¤ ë°” 1/12ì”© ì°¨ì˜¤ë¥´ë„ë¡ êµ¬í˜„
                $(".progress-bar").attr('style','width: calc(100/12*'+num+'%)');
                // ê° ë¬¸ì œë³„ ë¬¸ì œ&ì„ íƒì§€ ì¶œë ¥
                $("#title").html(q[num]["title"]);
                $("#type").val(q[num]["type"]);
                $("#A").html(q[num]["A"]);
                $("#B").html(q[num]["B"]);
                num++;
            }

        }
    </script>
<!-- Go to www.addthis.com/dashboard to customize your tools -->
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-6076fc88e5b8b134"></script>

    </article>



  <!-- í•˜ë‹¨ ê´‘ê³  -->
  <div class="footer-ad-container">
    <ins class="adsbygoogle" style="display:block"
         data-ad-client="ca-pub-4957586937754537"
         data-ad-slot="9931828353"
         data-ad-format="auto"
         data-full-width-responsive="true"></ins>
  </div>

  <!-- ì¿ íŒ¡ -->
  <p class="sr-only">ì¿ íŒ¡ ê´‘ê³ </p>
  <script src="https://ads-partners.coupang.com/g.js"></script>
  <script>
    new PartnersCoupang.G({ id: 810614, trackingCode: "AF4453761", subId: null, template: "carousel", width: "360", height: "100" });
  </script>

  <!-- ì• ë“œì„¼ìŠ¤ push -->
  <script>
    document.addEventListener("contextmenu", e => e.preventDefault());
    document.addEventListener("DOMContentLoaded", () => {
      try {
        (adsbygoogle = window.adsbygoogle || []).push({});
        window.addEventListener("load", () => {
          (adsbygoogle = window.adsbygoogle || []).push({});
        });
      } catch (e) {
        console.error("ì• ë“œì„¼ìŠ¤ ê´‘ê³  ë¡œë“œ ì‹¤íŒ¨:", e);
      }
    });
  </script>

  <!-- ===== ì°¸ì—¬ì ì¹´ìš´í„° (CountAPI) ===== -->
  <script>
    const COUNTER_BASE = 'https://api.counterapi.dev/v1';
    const ONLY_ONCE_PER_SESSION = false;

    function counterPath(ns, key) {
      return `${COUNTER_BASE}/${encodeURIComponent(ns)}/${encodeURIComponent(key)}/`;
    }

    function getCounterConfig() {
      const el = document.getElementById("test-counter");
      return {
        el,
        ns: el?.dataset.counterNamespace || "survivaloffice",
        key: el?.dataset.counterKey || "candy",
      };
    }

    function cacheKey(ns, key){ return `counter_${ns}_${key}`; }

    function getCachedCount(ns, key, maxAgeMs = 10 * 60 * 1000){
      try{
        const raw = localStorage.getItem(cacheKey(ns,key));
        if(!raw) return null;
        const obj = JSON.parse(raw);
        if(Date.now() - obj.t > maxAgeMs) return null;
        return typeof obj.v === 'number' ? obj.v : null;
      }catch{ return null; }
    }

    function setCachedCount(ns, key, val){
      try{
        localStorage.setItem(cacheKey(ns,key), JSON.stringify({ v: Number(val)||0, t: Date.now() }));
      }catch{}
    }

    async function fetchCount(ns, key) {
      const url = counterPath(ns, key);
      try {
        const r = await fetch(url, { cache: 'no-store', headers: { 'accept': 'application/json' } });
        if (!r.ok) return 0;
        const data = await r.json();
        return (typeof data.count === 'number') ? data.count :
               (typeof data.value === 'number') ? data.value : 0;
      } catch (e) {
        console.warn('[counter] fetch failed:', e);
        return 0;
      }
    }

    async function hitCount(ns, key) {
      const url = `${counterPath(ns, key)}up`;
      try {
        const r = await fetch(url, { cache: 'no-store', headers: { 'accept': 'application/json' } });
        if (!r.ok) return null;
        const data = await r.json();
        return (typeof data.count === 'number') ? data.count :
               (typeof data.value === 'number') ? data.value : null;
      } catch (e) {
        console.warn('[counter] hit failed:', e);
        return null;
      }
    }

    function shouldIncreaseThisSession(ns, key) {
      if (!ONLY_ONCE_PER_SESSION) return true;
      const flag = `counted_${ns}_${key}`;
      if (sessionStorage.getItem(flag) === "1") return false;
      sessionStorage.setItem(flag, "1");
      return true;
    }

    function renderCount(el, n) {
      if (!el) return;
      el.textContent = `ì´ ${Number(n).toLocaleString()}ëª… ì°¸ì—¬`;
      el.setAttribute("data-count", String(n));
      const { ns, key } = getCounterConfig();
      if (ns && key && typeof n === 'number') setCachedCount(ns, key, n);
    }

    (async function initCounter() {
      const { el, ns, key } = getCounterConfig();
      if (!el) return;

      const cached = getCachedCount(ns, key);
      if (cached !== null) renderCount(el, cached);

      const fresh = await fetchCount(ns, key);
      renderCount(el, fresh);

      const startBtnEl = document.getElementById("start-btn");
      if (startBtnEl) {
        startBtnEl.addEventListener("click", async () => {
          try {
            if (shouldIncreaseThisSession(ns, key)) {
              const after = await hitCount(ns, key);
              if (after !== null) renderCount(el, after);
            }
          } catch (e) {
            console.warn("[counter] increase on click failed:", e);
          }
        }, { once: false });
      }
    })();
  </script>

  <!-- âœ… ì¹´ì¹´ì˜¤ SDK ë™ì  ë¡œë“œ + ê³µìœ í•˜ê¸° ë¡œì§ (ë„¤ê°€ ì¤€ ë°©ì‹) -->
  <script>
    // ---------- ì¹´ì¹´ì˜¤ SDK ----------
    async function loadKakaoSDK() {
      return new Promise((resolve, reject) => {
        if (window.Kakao && Kakao.isInitialized()) { resolve(); return; }
        const script = document.createElement("script");
        script.src = "https://developers.kakao.com/sdk/js/kakao.min.js";
        script.onload = () => {
          if (!window.Kakao) { reject("âŒ Kakao ê°ì²´ê°€ ë¡œë“œë˜ì§€ ì•ŠìŒ"); return; }
          Kakao.init("eee6c2e01641161de9f217ba99c6a0da");
          resolve();
        };
        script.onerror = () => reject("âŒ Kakao SDK ë¡œë“œ ì‹¤íŒ¨");
        document.head.appendChild(script);
      });
    }

    // ë¡œë“œ/ì´ˆê¸°í™”
    loadKakaoSDK().catch(console.error);

    // ê³µìœ  ë²„íŠ¼ ì—°ê²°
    document.addEventListener("DOMContentLoaded", () => {
      const btn = document.getElementById("share-kakao");
      if (!btn) return;

      btn.addEventListener("click", async () => {
        try {
          await loadKakaoSDK(); // í˜¹ì‹œ ëŠ¦ê²Œ ë¡œë“œë  ìˆ˜ ìˆìœ¼ë‹ˆ ë³´ì¥

          const imgUrl = window.currentResultImageUrl || "https://www.survivaloffice.com/images/test002.png";
          const score = (typeof window.currentScore === "number") ? window.currentScore : null;

          const shareUrl = "https://www.survivaloffice.com/test/mi";
          const title = "ìº”ë”” í…ŒìŠ¤íŠ¸ê²°ê³¼";
          const desc = (score !== null) ? `ë‚´ ì ìˆ˜ëŠ” ${score}ì ! ë„ˆë„ í•´ë´ ğŸ‘‡` : "ë„ˆë„ í•´ë´ ğŸ‘‡";

          Kakao.Share.sendDefault({
            objectType: "feed",
            content: {
              title: title,
              description: desc,
              imageUrl: imgUrl,   // âœ… ê²°ê³¼ ì´ë¯¸ì§€
              link: { mobileWebUrl: shareUrl, webUrl: shareUrl }
            },
            buttons: [
              {
                title: "í…ŒìŠ¤íŠ¸ í•˜ëŸ¬ê°€ê¸°",
                link: { mobileWebUrl: shareUrl, webUrl: shareUrl }
              }
            ]
          });
        } catch (e) {
          console.error("ì¹´ì¹´ì˜¤ ê³µìœ  ì‹¤íŒ¨:", e);
          alert("ì¹´ì¹´ì˜¤ ê³µìœ  ì„¤ì •ì„ í™•ì¸í•´ì£¼ì„¸ìš”. (ë„ë©”ì¸ ë“±ë¡/í‚¤ í™•ì¸)");
        }
      });
    });
  </script>
</body>
</html>
