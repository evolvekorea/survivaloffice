const _0x870b4=_0x3ee8;(function(_0x3f52f0,_0x4b1725){const _0x2047bd=_0x3ee8,_0x3ea92f=_0x3f52f0();while(!![]){try{const _0x48af8a=parseInt(_0x2047bd(0x1f2))/0x1+-parseInt(_0x2047bd(0x1bc))/0x2+-parseInt(_0x2047bd(0x20c))/0x3*(parseInt(_0x2047bd(0x1b3))/0x4)+-parseInt(_0x2047bd(0x15b))/0x5*(parseInt(_0x2047bd(0x1d1))/0x6)+parseInt(_0x2047bd(0x1fe))/0x7+parseInt(_0x2047bd(0x157))/0x8*(parseInt(_0x2047bd(0x15d))/0x9)+-parseInt(_0x2047bd(0x18d))/0xa;if(_0x48af8a===_0x4b1725)break;else _0x3ea92f['push'](_0x3ea92f['shift']());}catch(_0x323105){_0x3ea92f['push'](_0x3ea92f['shift']());}}}(_0x4c50,0x238cf));import{initializeApp}from'https://www.gstatic.com/firebasejs/11.0.2/firebase-app.js';import{getFirestore,collection,query,where,getDocs,addDoc,updateDoc,doc,orderBy,limit}from'https://www.gstatic.com/firebasejs/11.0.2/firebase-firestore.js';const firebaseConfig={'apiKey':'AIzaSyCK4Zdkhlc0cnjqC3TpmUJmLAt8Xrh8VOw','authDomain':_0x870b4(0x18f),'projectId':'upupup-e4c2c','storageBucket':'upupup-e4c2c.appspot.com','messagingSenderId':_0x870b4(0x185),'appId':_0x870b4(0x195)},app=initializeApp(firebaseConfig),db=getFirestore(app),loadingMessage=document['getElementById'](_0x870b4(0x159)),startButton=document[_0x870b4(0x18e)]('start-btn'),startScreen=document[_0x870b4(0x18e)](_0x870b4(0x15f)),planetArea=document[_0x870b4(0x18e)]('planet-area'),gameImages=[_0x870b4(0x210),_0x870b4(0x1c5),_0x870b4(0x1b8),'https://www.survivaloffice.com/images/4.png',_0x870b4(0x1a3),_0x870b4(0x1ae),_0x870b4(0x204),_0x870b4(0x180),_0x870b4(0x16e),_0x870b4(0x1b4),_0x870b4(0x169)];function preloadImages(_0x3b84fb,_0x1069a8){const _0x12a90a=_0x870b4;let _0x4bc8b2=0x0;const _0x2d74a8=_0x3b84fb[_0x12a90a(0x1e9)];_0x3b84fb[_0x12a90a(0x1af)](_0x3fbfbe=>{const _0x7032da=_0x12a90a,_0x2a75f9=new Image();_0x2a75f9[_0x7032da(0x1cb)]=_0x3fbfbe,_0x2a75f9['onload']=()=>{const _0xd86c91=_0x7032da;_0x4bc8b2++,loadingMessage[_0xd86c91(0x164)]='이미지\x20로드\x20중...\x20('+_0x4bc8b2+'/'+_0x2d74a8+')',_0x4bc8b2===_0x2d74a8&&_0x1069a8();},_0x2a75f9[_0x7032da(0x19e)]=()=>console['error'](_0x7032da(0x1d9)+_0x3fbfbe);});}preloadImages([_0x870b4(0x210),_0x870b4(0x1c5),'https://www.survivaloffice.com/images/3.png',_0x870b4(0x176),_0x870b4(0x1a3),_0x870b4(0x1ae),'https://www.survivaloffice.com/images/7.png','https://www.survivaloffice.com/images/8.png','https://www.survivaloffice.com/images/9.png','https://www.survivaloffice.com/images/10.png',_0x870b4(0x169)],()=>{const _0x5af363=_0x870b4;console[_0x5af363(0x1f3)](_0x5af363(0x1ce)),loadingMessage[_0x5af363(0x164)]='',startButton[_0x5af363(0x1a0)]['display']=_0x5af363(0x1d3);});let isGameStarted=![];startButton[_0x870b4(0x1fb)](_0x870b4(0x1cd),_0x28d7d2=>{const _0x49f153=_0x870b4;_0x28d7d2['stopPropagation'](),isGameStarted=!![],startScreen[_0x49f153(0x1a0)][_0x49f153(0x1e4)]=_0x49f153(0x20f),planetArea[_0x49f153(0x1a0)][_0x49f153(0x1e4)]=_0x49f153(0x1d3),console[_0x49f153(0x1f3)](_0x49f153(0x209));});const pl=planck,Vec2=pl[_0x870b4(0x1d7)],world=pl[_0x870b4(0x1dc)](Vec2(0x0,-0xa)),canvas=document[_0x870b4(0x1fd)]('canvas'),ctx=canvas[_0x870b4(0x20b)]('2d');planetArea[_0x870b4(0x1e1)](canvas),canvas[_0x870b4(0x1db)]=0x168,canvas[_0x870b4(0x174)]=0x1c2;const planets=[{'name':'명왕성','url':_0x870b4(0x171),'score':0xa,'baseSize':0.1},{'name':'수성','url':_0x870b4(0x1a6),'score':0x14,'baseSize':0.12},{'name':'화성','url':'https://survivaloffice.com/images/3.png','score':0x28,'baseSize':0.2},{'name':'금성','url':_0x870b4(0x166),'score':0x50,'baseSize':0.22},{'name':'지구','url':_0x870b4(0x1d0),'score':0x78,'baseSize':0.3},{'name':'천왕성','url':_0x870b4(0x1f0),'score':0xc8,'baseSize':0.35},{'name':_0x870b4(0x1cf),'url':_0x870b4(0x189),'score':0x190,'baseSize':0.41},{'name':'토성','url':'https://survivaloffice.com/images/8.png','score':0x258,'baseSize':0.47},{'name':'목성','url':_0x870b4(0x1a7),'score':0x3e8,'baseSize':0.52},{'name':'태양','url':_0x870b4(0x1e8),'score':0x7d0,'baseSize':0.65}],top10RankButton=document[_0x870b4(0x18e)]('top10-rank'),rankingContainer=document[_0x870b4(0x18e)](_0x870b4(0x1b0));top10RankButton&&rankingContainer?top10RankButton[_0x870b4(0x1fb)](_0x870b4(0x1cd),async()=>{const _0x80dfca=_0x870b4;console['log'](_0x80dfca(0x206)),rankingContainer[_0x80dfca(0x1a0)][_0x80dfca(0x1e4)]=_0x80dfca(0x1d3),rankingContainer['innerHTML']=_0x80dfca(0x178),await loadTop10Rankings(),await loadAllTimeHighScore();}):console[_0x870b4(0x15c)](_0x870b4(0x1a4));async function loadTop10Rankings(){const _0x1d42e5=_0x870b4,_0xa8e557=collection(db,'planet'),{startDate:_0x5129a0,endDate:_0x399891}=getCurrentWeekRange();console[_0x1d42e5(0x1f3)](_0x1d42e5(0x17d),_0x5129a0),console[_0x1d42e5(0x1f3)](_0x1d42e5(0x1b5),_0x399891);const _0x4a28a5=query(_0xa8e557,where(_0x1d42e5(0x1ee),'>=',_0x5129a0),where(_0x1d42e5(0x1ee),'<=',_0x399891),orderBy(_0x1d42e5(0x168),_0x1d42e5(0x17c)),orderBy(_0x1d42e5(0x1ee),_0x1d42e5(0x17c)),limit(0xa)),_0x491258=await getDocs(_0x4a28a5);console[_0x1d42e5(0x1f3)](_0x1d42e5(0x158),_0x491258[_0x1d42e5(0x213)]),_0x491258['forEach'](_0x3256ef=>{const _0x2a3eac=_0x1d42e5;console[_0x2a3eac(0x1f3)](_0x3256ef[_0x2a3eac(0x16f)]());});try{const _0x25de45=await getDocs(_0x4a28a5);if(_0x25de45[_0x1d42e5(0x17a)]){rankingContainer[_0x1d42e5(0x1d2)]='<p>랭킹\x20데이터가\x20없습니다.</p>';return;}let _0x11d1da=_0x1d42e5(0x1df),_0x46c889=0x1;_0x25de45[_0x1d42e5(0x1af)](_0x4192f0=>{const _0x3047d4=_0x1d42e5,_0x3574f6=_0x4192f0[_0x3047d4(0x16f)](),_0x54745a=_0x3574f6[_0x3047d4(0x16b)]||'Unknown',_0x45f8dd=_0x3574f6[_0x3047d4(0x168)]||0x0;let _0x5bec32;typeof _0x3574f6[_0x3047d4(0x1ee)]===_0x3047d4(0x160)?_0x5bec32=_0x3574f6[_0x3047d4(0x1ee)][_0x3047d4(0x1c7)](0x0,0xa):_0x5bec32=_0x3047d4(0x1f9);let _0x27ff4b='';if(_0x46c889===0x1)_0x27ff4b='🥇';else{if(_0x46c889===0x2)_0x27ff4b='🥈';else{if(_0x46c889===0x3)_0x27ff4b='🥉';}}_0x11d1da+=_0x3047d4(0x1f6)+_0x27ff4b+'\x20'+_0x46c889+'위\x20-\x20'+_0x54745a+',\x20'+_0x45f8dd+_0x3047d4(0x199)+_0x5bec32+_0x3047d4(0x172),_0x46c889++;}),_0x11d1da+='</ul><h4\x20style=\x22color:\x20red;\x22>📢\x20랭킹은\x20매주\x20월요일\x20초기화됩니다.</h4>',console['log'](_0x1d42e5(0x201),rankingContainer[_0x1d42e5(0x1d2)]),rankingContainer[_0x1d42e5(0x1d2)]=_0x11d1da,console[_0x1d42e5(0x1f3)](_0x1d42e5(0x1e6),rankingContainer[_0x1d42e5(0x1d2)]);const _0x3965be=document[_0x1d42e5(0x161)](_0x1d42e5(0x182));_0x3965be[_0x1d42e5(0x1af)]((_0x3a8cc4,_0x231d32)=>{const _0x5526e7=_0x1d42e5;_0x3a8cc4[_0x5526e7(0x1a0)][_0x5526e7(0x202)]=_0x231d32*0.5+'s';});}catch(_0x3bc4cd){console[_0x1d42e5(0x15c)](_0x1d42e5(0x186),_0x3bc4cd),rankingContainer[_0x1d42e5(0x1d2)]='<p>랭킹\x20데이터를\x20불러오지\x20못했습니다.</p>';}}function getCurrentWeekRange(){const _0x18b7db=_0x870b4,_0x4d4759=new Date(),_0x5338ab=_0x4d4759['getDay']();console[_0x18b7db(0x1f3)]('현재\x20날짜:\x20'+_0x4d4759),console[_0x18b7db(0x1f3)](_0x18b7db(0x184)+_0x5338ab);const _0x1fe21a=_0x5338ab===0x0?-0x6:0x1-_0x5338ab;console[_0x18b7db(0x1f3)]('월요일까지의\x20차이:\x20'+_0x1fe21a);const _0x256177=new Date(_0x4d4759);_0x256177[_0x18b7db(0x20d)](_0x4d4759[_0x18b7db(0x19c)]()+_0x1fe21a),_0x256177[_0x18b7db(0x1dd)](0x0,0x0,0x0,0x0),console['log'](_0x18b7db(0x1c0)+_0x256177);const _0x1caff1=new Date(_0x256177);_0x1caff1[_0x18b7db(0x20d)](_0x256177[_0x18b7db(0x19c)]()+0x6),_0x1caff1[_0x18b7db(0x1dd)](0x17,0x3b,0x3b,0x3e7),console['log'](_0x18b7db(0x1ac)+_0x1caff1);const _0x1e2909=_0x256177['getFullYear']()+'-'+String(_0x256177[_0x18b7db(0x183)]()+0x1)[_0x18b7db(0x1e3)](0x2,'0')+'-'+String(_0x256177[_0x18b7db(0x19c)]())['padStart'](0x2,'0'),_0x2b3da5=_0x1caff1[_0x18b7db(0x18b)]()+'-'+String(_0x1caff1['getMonth']()+0x1)[_0x18b7db(0x1e3)](0x2,'0')+'-'+String(_0x1caff1[_0x18b7db(0x19c)]())[_0x18b7db(0x1e3)](0x2,'0');return console[_0x18b7db(0x1f3)](_0x18b7db(0x1ea)+_0x1e2909+_0x18b7db(0x207)+_0x2b3da5),{'startDate':_0x1e2909,'endDate':_0x2b3da5};}async function loadAllTimeHighScore(){const _0x3936f8=_0x870b4,_0x2a093a=collection(db,_0x3936f8(0x1cc)),_0x10f34b=query(_0x2a093a,orderBy(_0x3936f8(0x168),_0x3936f8(0x17c)),limit(0x1));try{const _0x36cc55=await getDocs(_0x10f34b);if(_0x36cc55['empty']){rankingContainer[_0x3936f8(0x1d2)]+=_0x3936f8(0x16a);return;}let _0x1cb09d='<h2>🏆역대\x20최고\x20기록🏆</h2>';_0x36cc55[_0x3936f8(0x1af)](_0x7a7b37=>{const _0x38219f=_0x3936f8,_0x511821=_0x7a7b37[_0x38219f(0x16f)](),_0x4c4e08=_0x511821[_0x38219f(0x16b)]||_0x38219f(0x205),_0x17e840=_0x511821['score']||0x0;let _0x256492;if(_0x511821[_0x38219f(0x1ee)]&&typeof _0x511821[_0x38219f(0x1ee)][_0x38219f(0x188)]==='function'){const _0x43cb0d=_0x511821['date'][_0x38219f(0x188)](),_0x285b8b=_0x43cb0d[_0x38219f(0x18b)](),_0x13ca13=String(_0x43cb0d[_0x38219f(0x183)]()+0x1)[_0x38219f(0x1e3)](0x2,'0'),_0x531fbc=String(_0x43cb0d[_0x38219f(0x19c)]())[_0x38219f(0x1e3)](0x2,'0');_0x256492=_0x285b8b+'-'+_0x13ca13+'-'+_0x531fbc;}else typeof _0x511821[_0x38219f(0x1ee)]==='string'?_0x256492=_0x511821['date'][_0x38219f(0x1c7)](0x0,0xa):_0x256492=_0x38219f(0x1f9);_0x1cb09d+=_0x38219f(0x16d)+_0x4c4e08+',\x20\x20'+_0x17e840+_0x38219f(0x19d)+_0x256492+_0x38219f(0x16c);}),rankingContainer[_0x3936f8(0x1d2)]+=_0x1cb09d;}catch(_0x50b59e){console[_0x3936f8(0x15c)](_0x3936f8(0x20e),_0x50b59e),rankingContainer[_0x3936f8(0x1d2)]+=_0x3936f8(0x193);}}rankingContainer?rankingContainer[_0x870b4(0x1fb)](_0x870b4(0x1cd),()=>{const _0x36af2c=_0x870b4;rankingContainer[_0x36af2c(0x1a0)][_0x36af2c(0x1e4)]=_0x36af2c(0x20f);}):console[_0x870b4(0x15c)](_0x870b4(0x177));function _0x4c50(){const _0x3c1377=['message','.ranking-item','getMonth','현재\x20요일:\x20','877963060151','Firestore에서\x20랭킹\x20데이터를\x20가져오는\x20중\x20오류\x20발생:','splice','toDate','https://survivaloffice.com/images/7.png','clearRect','getFullYear','img','4643090sGIJDH','getElementById','upupup-e4c2c.firebaseapp.com','Failed\x20to\x20load\x20fallback\x20image:\x20','not-allowed','등록\x20완료','<p>최고\x20점수\x20데이터를\x20불러오지\x20못했습니다.</p>','reload','1:877963060151:web:e70751cb30638880767e32','닫기\x20버튼\x20클릭됨','left','now','점\x20<span\x20class=\x22date\x22>','globalAlpha','새로운\x20점수\x20저장\x20중...','getDate','점\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22date\x22\x20style=\x22margin-left:\x20auto;\x20text-align:\x20right;\x22>','onerror','result-popup','style','getFixtureB','next-planet-preview','https://www.survivaloffice.com/images/5.png','top10-rank\x20버튼\x20또는\x20ranking-container\x20요소를\x20찾을\x20수\x20없습니다.','dynamic','https://survivaloffice.com/images/2.png','https://survivaloffice.com/images/9.png','maxWidth','next-planet-container','50px','url','계산된\x20일요일:\x20','arc','https://www.survivaloffice.com/images/6.png','forEach','ranking-container','닉네임은\x205글자\x20이하로\x20입력해주세요.','toISOString','240ScKmsL','https://www.survivaloffice.com/images/10.png','End\x20Date:','preventDefault','fill','https://www.survivaloffice.com/images/3.png','rgba(255,\x20255,\x200,\x200.8)','Circle','name','246840ugkbnK','rotationAngle','isDynamic','Edge','계산된\x20월요일:\x20','image','nicknameInput','baseSize','save','https://www.survivaloffice.com/images/2.png','isMerging','slice','닉네임을\x20입력해주세요.','5px','Error\x20adding\x20data:','src','planet','click','모든\x20이미지가\x20로드되었습니다!','해왕성','https://survivaloffice.com/images/5.png','6ETyuqV','innerHTML','block','getPosition','Firestore에\x20점수\x20저장\x20시도:','alt','Vec2','indexOf','이미지\x20로드\x20실패:\x20','saveScoreButton','width','World','setHours','split','<h2>Top\x2010\x20랭킹</h2><ul>','applyLinearImpulse','appendChild','sqrt','padStart','display','getBoundingClientRect','After\x20updating:','planet-','https://survivaloffice.com/images/10.png','length','이번\x20주\x20날짜\x20범위:\x20','label','gray','step','date','random','https://survivaloffice.com/images/6.png','clip','240817PedEvO','log','rotate','createBody','<li\x20class=\x22ranking-item\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','walls','disabled','날짜\x20없음','Failed\x20to\x20load\x20image:\x20','addEventListener','createFixture','createElement','1912498DATujC','이미\x20점수가\x20등록되었습니다.','default.png','Before\x20updating:','animationDelay','fillStyle','https://www.survivaloffice.com/images/7.png','Unknown','랭킹\x20보기\x20버튼\x20클릭됨','\x20~\x20','radius','게임\x20시작!','beginPath','getContext','2763ZTmqhS','setDate','Firestore에서\x20최고\x20점수\x20데이터를\x20가져오는\x20중\x20오류\x20발생:','none','https://www.survivaloffice.com/images/1.png','setLinearVelocity','getBody','size','resize','clientX','translate','closePopupButton','1108928igzNjG','쿼리\x20결과\x20개수:','loading-message','drawImage','13295XepUiV','error','18dfIqaZ','m_tolerance','start-screen','string','querySelectorAll','value','margin','textContent','min','https://survivaloffice.com/images/4.png','cursor','score','https://www.survivaloffice.com/images/LRLR.png','<h3>최고\x20점수\x20데이터가\x20없습니다.</h3>','nickname','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3\x20style=\x22display:\x20flex;\x20justify-content:\x20space-between;\x20align-items:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20🎉\x20\x20','https://www.survivaloffice.com/images/9.png','data','location','https://survivaloffice.com/images/1.png','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</li>','.\x20Using\x20fallback\x20image.','height','shift','https://www.survivaloffice.com/images/4.png','ranking-container\x20요소를\x20찾을\x20수\x20없습니다.','<p>로딩\x20중...</p>','destroyBody','empty','then','desc','Start\x20Date:','push','clientWidth','https://www.survivaloffice.com/images/8.png'];_0x4c50=function(){return _0x3c1377;};return _0x4c50();}async function saveScore(_0x44239f,_0x31dfdf){const _0x1032c8=_0x870b4;console[_0x1032c8(0x1f3)](_0x1032c8(0x1d5),_0x44239f,_0x31dfdf);const _0x81b890=new Date(),_0x53d3c6=0x9*0x3c*0x3c*0x3e8,_0x2f3315=new Date(_0x81b890['getTime']()+_0x53d3c6),_0x44367b=_0x2f3315[_0x1032c8(0x1b2)]()[_0x1032c8(0x1de)]('T')[0x0],_0x52d1cf=collection(db,_0x1032c8(0x1cc));try{console['log'](_0x1032c8(0x19b)),await addDoc(_0x52d1cf,{'nickname':_0x44239f||_0x1032c8(0x205),'score':_0x31dfdf,'date':_0x44367b}),alert('점수가\x20성공적으로\x20저장되었습니다.');}catch(_0x34c135){console[_0x1032c8(0x15c)](_0x1032c8(0x1ca),_0x34c135),alert('점수\x20저장\x20중\x20오류가\x20발생했습니다.');};}document[_0x870b4(0x18e)](_0x870b4(0x217))[_0x870b4(0x1fb)]('click',()=>{const _0x3c821e=_0x870b4;console[_0x3c821e(0x1f3)](_0x3c821e(0x196)),window[_0x3c821e(0x170)][_0x3c821e(0x194)]();});const saveScoreButton=document['getElementById'](_0x870b4(0x1da));saveScoreButton[_0x870b4(0x1fb)](_0x870b4(0x1cd),async _0x4c77a9=>{const _0x5b652d=_0x870b4;_0x4c77a9[_0x5b652d(0x1b6)]();if(saveScoreButton[_0x5b652d(0x1f8)]){alert(_0x5b652d(0x1ff));return;}const _0x2428b3=document[_0x5b652d(0x18e)](_0x5b652d(0x1c2))[_0x5b652d(0x162)];if(_0x2428b3[_0x5b652d(0x1e9)]===0x0){alert(_0x5b652d(0x1c8));return;}else{if(_0x2428b3[_0x5b652d(0x1e9)]>0x5){alert(_0x5b652d(0x1b1));return;}}await saveScore(_0x2428b3,score),saveScoreButton[_0x5b652d(0x1f8)]=!![],saveScoreButton['style'][_0x5b652d(0x167)]=_0x5b652d(0x191),saveScoreButton[_0x5b652d(0x164)]=_0x5b652d(0x192);});function showGameOverPopup(){const _0xa6b041=_0x870b4,_0x1857a5=document[_0xa6b041(0x18e)](_0xa6b041(0x19f));_0x1857a5[_0xa6b041(0x1a0)]['display']='block';}let score=0x0;const scoreDisplay=document[_0x870b4(0x18e)](_0x870b4(0x168));function getPlanetSize(_0x30c50f){const _0x572f43=_0x870b4,_0x1f5d4e=Math[_0x572f43(0x165)](canvas[_0x572f43(0x1db)],canvas[_0x572f43(0x174)]);return _0x30c50f*_0x1f5d4e*0.05;}function loadImage(_0x531572,_0x3bd3ef=_0x870b4(0x200)){return new Promise((_0x34ed29,_0x128123)=>{const _0x20c309=_0x3ee8,_0x582dfe=new Image();_0x582dfe[_0x20c309(0x1cb)]=_0x531572,_0x582dfe['onload']=()=>{_0x34ed29(_0x582dfe);},_0x582dfe[_0x20c309(0x19e)]=()=>{const _0x49ddba=_0x20c309;console[_0x49ddba(0x15c)](_0x49ddba(0x1fa)+_0x531572+_0x49ddba(0x173));const _0x305642=new Image();_0x305642['src']=_0x3bd3ef,_0x305642['onload']=()=>{_0x34ed29(_0x305642);},_0x305642['onerror']=()=>{const _0x451296=_0x49ddba;_0x128123(new Error(_0x451296(0x190)+_0x3bd3ef));};};});}function drawRotatingPlanet(_0x3b2194){const _0x4da2b7=_0x870b4,_0xbcbe6=_0x3b2194['getPosition'](),_0x273a49={'x':_0xbcbe6['x']*0x1e,'y':canvas['height']-_0xbcbe6['y']*0x1e},_0x19d6c8=_0x3b2194[_0x4da2b7(0x208)]*0x1e;_0x3b2194[_0x4da2b7(0x1c1)]?(ctx[_0x4da2b7(0x1c4)](),ctx[_0x4da2b7(0x20a)](),ctx[_0x4da2b7(0x1ad)](_0x273a49['x'],_0x273a49['y'],_0x19d6c8,0x0,0x2*Math['PI']),ctx[_0x4da2b7(0x1f1)](),ctx[_0x4da2b7(0x216)](_0x273a49['x'],_0x273a49['y']),ctx[_0x4da2b7(0x1f4)](_0x3b2194['rotationAngle']),ctx[_0x4da2b7(0x15a)](_0x3b2194[_0x4da2b7(0x1c1)],-_0x19d6c8,-_0x19d6c8,_0x19d6c8*2.07,_0x19d6c8*2.07),ctx['restore'](),_0x3b2194[_0x4da2b7(0x1bd)]<0x2*Math['PI']&&(_0x3b2194[_0x4da2b7(0x1bd)]+=0.05)):(ctx[_0x4da2b7(0x20a)](),ctx['arc'](_0x273a49['x'],_0x273a49['y'],_0x19d6c8,0x0,0x2*Math['PI']),ctx[_0x4da2b7(0x203)]=_0x4da2b7(0x1ec),ctx['fill']());}let planetDropCount=0x0;function getNextPlanetIndex(){const _0x4e8e31=_0x870b4;if(planetDropCount<0x14)return planetDropCount++,0x0;const _0x42859d=Math[_0x4e8e31(0x1ef)]()*0x64;if(_0x42859d<0x3c)return 0x0;if(_0x42859d<0x5a)return 0x1;return 0x2;}function updateScore(_0x44455a){const _0x8bc2ce=_0x870b4;score+=_0x44455a,scoreDisplay[_0x8bc2ce(0x164)]='Score:\x20'+score;}function createPlanet(_0x5789c3,_0x4a1a0c,_0x280c42=canvas['height']/0x1e){const _0x314793=_0x870b4,_0x195cb2=planets[_0x5789c3],_0x53c1b8=getPlanetSize(_0x195cb2[_0x314793(0x1c3)])/3.2,_0x1a8ac8=_0x53c1b8/0x1e,_0x1aba94=canvas[_0x314793(0x1db)]/0x1e-_0x53c1b8/0x1e;_0x4a1a0c=Math['max'](_0x1a8ac8,Math[_0x314793(0x165)](_0x4a1a0c,_0x1aba94));const _0x406872=world[_0x314793(0x1f5)]({'type':_0x314793(0x1a5),'position':Vec2(_0x4a1a0c,_0x280c42)});return _0x406872[_0x314793(0x1fc)](pl[_0x314793(0x1ba)](_0x53c1b8),{'density':0x3,'friction':0.2,'restitution':0.1}),_0x406872['radius']=_0x53c1b8,_0x406872['label']=_0x314793(0x1e7)+_0x5789c3,_0x406872[_0x314793(0x1bd)]=0x0,loadImage(_0x195cb2['url'])[_0x314793(0x17b)](_0x3a5524=>{const _0x1b547c=_0x314793;_0x406872[_0x1b547c(0x1c1)]=_0x3a5524;})['catch'](_0x296bae=>{const _0x12a10a=_0x314793;console['error'](_0x296bae[_0x12a10a(0x181)]);}),_0x406872[_0x314793(0x211)](Vec2(0x0,-0x1e)),_0x406872;}function _0x3ee8(_0x3755b0,_0x1771ec){const _0x4c50f7=_0x4c50();return _0x3ee8=function(_0x3ee82c,_0xe1d9ea){_0x3ee82c=_0x3ee82c-0x157;let _0x2af474=_0x4c50f7[_0x3ee82c];return _0x2af474;},_0x3ee8(_0x3755b0,_0x1771ec);}world[_0x870b4(0x15e)]=0.001;function toCanvasCoords(_0x3fd3d9){const _0x330831=_0x870b4;return{'x':_0x3fd3d9['x']*0x1e,'y':canvas[_0x330831(0x174)]-_0x3fd3d9['y']*0x1e};}function createWalls(){const _0x1ea2b8=_0x870b4,_0x517694=canvas[_0x1ea2b8(0x1db)]/0x1e,_0x44bd57=canvas[_0x1ea2b8(0x174)]/0x1e;world[_0x1ea2b8(0x1f7)]&&world[_0x1ea2b8(0x1f7)][_0x1ea2b8(0x1af)](_0x4bf553=>world[_0x1ea2b8(0x179)](_0x4bf553));const _0x5607a1=[],_0x1e117b=world['createBody']();_0x1e117b[_0x1ea2b8(0x1fc)](pl['Edge'](Vec2(0x0,0x0),Vec2(0x0,_0x44bd57)),{'friction':0.2,'restitution':0.1}),_0x5607a1[_0x1ea2b8(0x17e)](_0x1e117b);const _0x344544=world[_0x1ea2b8(0x1f5)]();_0x344544['createFixture'](pl['Edge'](Vec2(_0x517694,0x0),Vec2(_0x517694,_0x44bd57)),{'friction':0.2,'restitution':0.1}),_0x5607a1[_0x1ea2b8(0x17e)](_0x344544);const _0x12807b=world[_0x1ea2b8(0x1f5)]();_0x12807b[_0x1ea2b8(0x1fc)](pl[_0x1ea2b8(0x1bf)](Vec2(0x0,0x0),Vec2(_0x517694,0x0)),{'friction':0.2,'restitution':0.1}),_0x5607a1[_0x1ea2b8(0x17e)](_0x12807b),world[_0x1ea2b8(0x1f7)]=_0x5607a1;}createWalls(),window[_0x870b4(0x1fb)](_0x870b4(0x214),()=>{const _0x5392b6=_0x870b4;canvas['width']=0x168,canvas[_0x5392b6(0x174)]=0x1c2,createWalls();});function drawPlanet(_0x432c6c){const _0x3e2c77=_0x870b4,_0x5bb12e=_0x432c6c['getPosition'](),_0x39b56f={'x':_0x5bb12e['x']*0x1e,'y':canvas['height']-_0x5bb12e['y']*0x1e},_0x2b7b43=_0x432c6c[_0x3e2c77(0x208)]*0x1e;_0x432c6c[_0x3e2c77(0x1c1)]?ctx[_0x3e2c77(0x15a)](_0x432c6c[_0x3e2c77(0x1c1)],_0x39b56f['x']-_0x2b7b43,_0x39b56f['y']-_0x2b7b43,_0x2b7b43*2.07,_0x2b7b43*2.07):(ctx[_0x3e2c77(0x20a)](),ctx[_0x3e2c77(0x1ad)](_0x39b56f['x'],_0x39b56f['y'],_0x2b7b43,0x0,0x2*Math['PI']),ctx['fillStyle']='gray',ctx[_0x3e2c77(0x1b7)]());}function resizeCanvas(){const _0x4a92ab=_0x870b4;canvas[_0x4a92ab(0x1db)]=planetArea[_0x4a92ab(0x17f)],canvas['height']=planetArea['clientHeight'],createWalls();}window[_0x870b4(0x1fb)](_0x870b4(0x214),resizeCanvas),resizeCanvas();function render(){const _0x59b376=_0x870b4;ctx[_0x59b376(0x18a)](0x0,0x0,canvas[_0x59b376(0x1db)],canvas[_0x59b376(0x174)]),planetsList['forEach'](_0x22c60e=>{drawRotatingPlanet(_0x22c60e);}),requestAnimationFrame(render);}function applyImpulse(_0x528129,_0x1df8c1=0x14){const _0x24499b=_0x870b4,_0x1cc7cf=_0x528129['getPosition']();planetsList[_0x24499b(0x1af)](_0x4cf0e0=>{const _0x51ce49=_0x24499b;if(_0x4cf0e0===_0x528129)return;const _0x5a340b=_0x4cf0e0[_0x51ce49(0x1d4)](),_0xdce039=_0x5a340b['x']-_0x1cc7cf['x'],_0x13c7e5=_0x5a340b['y']-_0x1cc7cf['y'],_0x49f3fb=Math[_0x51ce49(0x1e2)](_0xdce039*_0xdce039+_0x13c7e5*_0x13c7e5);if(_0x49f3fb<_0x528129['radius']+_0x4cf0e0[_0x51ce49(0x208)]){const _0x154fb5=_0xdce039/_0x49f3fb*_0x1df8c1,_0x188a7d=_0x13c7e5/_0x49f3fb*_0x1df8c1;_0x4cf0e0[_0x51ce49(0x1e0)](Vec2(_0x154fb5,_0x188a7d),_0x4cf0e0['getWorldCenter']());}});}let lastPlanetDropTime=0x0;const planetDropDelay=0xc8;let currentPlanetIndex;currentPlanetIndex=getNextPlanetIndex(),updateNextPlanetPreview();function updateNextPlanetPreview(){const _0x7caf1c=_0x870b4,_0x15e0f8=document[_0x7caf1c(0x18e)](_0x7caf1c(0x1a2));_0x15e0f8['innerHTML']='';const _0x38034f=planets[currentPlanetIndex],_0x393730=document['createElement'](_0x7caf1c(0x18c));_0x393730[_0x7caf1c(0x1cb)]=_0x38034f[_0x7caf1c(0x1ab)],_0x393730[_0x7caf1c(0x1d6)]=_0x38034f[_0x7caf1c(0x1bb)],_0x15e0f8[_0x7caf1c(0x1e1)](_0x393730);}planetArea[_0x870b4(0x1fb)]('click',_0x5e2c6b=>{const _0x3e8402=_0x870b4;if(!isGameStarted)return;if(isGameOver)return;const _0x6c322b=Date['now']();if(_0x6c322b-lastPlanetDropTime<planetDropDelay)return;const _0x5bd24e=(_0x5e2c6b[_0x3e8402(0x215)]-planetArea[_0x3e8402(0x1e5)]()[_0x3e8402(0x197)])/0x1e;planetsList['push'](createPlanet(currentPlanetIndex,_0x5bd24e,canvas[_0x3e8402(0x174)]/0x1e)),currentPlanetIndex=getNextPlanetIndex(),updateNextPlanetPreview(),lastPlanetDropTime=_0x6c322b;});function mergePlanets(_0x1d1e14,_0x4f257f,_0x41fa90){const _0x1e7f47=_0x870b4,_0x9b9be6=_0x1d1e14[_0x1e7f47(0x1d4)]();world['destroyBody'](_0x1d1e14),world[_0x1e7f47(0x179)](_0x4f257f),planetsList['splice'](planetsList[_0x1e7f47(0x1d8)](_0x1d1e14),0x1),planetsList[_0x1e7f47(0x187)](planetsList[_0x1e7f47(0x1d8)](_0x4f257f),0x1);const _0x3cc4f8=toCanvasCoords(_0x9b9be6);createEffect(_0x3cc4f8['x'],_0x3cc4f8['y']);if(_0x41fa90===null){updateScore(0x1388);const _0x58ddc7=toCanvasCoords(_0x9b9be6);createEffect(_0x58ddc7['x'],_0x58ddc7['y']);}setTimeout(()=>{if(_0x41fa90!==null){const _0x12efc0=createPlanet(_0x41fa90,_0x9b9be6['x'],_0x9b9be6['y']);planetsList['push'](_0x12efc0),applyImpulse(_0x12efc0),updateScore(planets[_0x41fa90]['score']);}},0x64);}function createEffect(_0x27c8b5,_0x5d5d78){const _0x254ca6=_0x870b4,_0x20aa75=0x1f4,_0x273cf0=Date[_0x254ca6(0x198)]();function _0x49a6f9(){const _0x4e2ab5=_0x254ca6,_0x219698=Date[_0x4e2ab5(0x198)]()-_0x273cf0;if(_0x219698>_0x20aa75)return;ctx[_0x4e2ab5(0x1c4)](),ctx[_0x4e2ab5(0x19a)]=0x1-_0x219698/_0x20aa75,ctx[_0x4e2ab5(0x20a)](),ctx['arc'](_0x27c8b5,_0x5d5d78,0x1e+_0x219698/0xa,0x0,0x2*Math['PI']),ctx['strokeStyle']=_0x4e2ab5(0x1b9),ctx['lineWidth']=0x3,ctx['stroke'](),ctx['restore'](),requestAnimationFrame(_0x49a6f9);}_0x49a6f9();}function addSunToNextContainer(){const _0x4b56b5=_0x870b4,_0x1402e0=document[_0x4b56b5(0x18e)](_0x4b56b5(0x1a9)),_0x2d5127=document[_0x4b56b5(0x1fd)](_0x4b56b5(0x18c));_0x2d5127['src']=planets[planets[_0x4b56b5(0x1e9)]-0x1][_0x4b56b5(0x1ab)],_0x2d5127[_0x4b56b5(0x1d6)]='태양',_0x2d5127[_0x4b56b5(0x1a0)][_0x4b56b5(0x1a8)]=_0x4b56b5(0x1aa),_0x2d5127[_0x4b56b5(0x1a0)][_0x4b56b5(0x163)]=_0x4b56b5(0x1c9),_0x1402e0['appendChild'](_0x2d5127);}function checkGameOver(){const _0x343eb2=_0x870b4,_0x581f07=canvas['height'];planetsList[_0x343eb2(0x1af)](_0x263b89=>{const _0x2c8386=_0x343eb2,_0x2eb9b4=_0x263b89[_0x2c8386(0x1d4)](),_0x559952=toCanvasCoords(_0x2eb9b4),_0x824127=_0x263b89[_0x2c8386(0x208)]*0x1e;_0x559952['y']+_0x824127<=0x0&&endGame();});}const mergeQueue=[];world['on']('pre-solve',_0x5d9bf5=>{const _0x5ddfad=_0x870b4,_0x47c750=_0x5d9bf5['getFixtureA']()[_0x5ddfad(0x212)](),_0x386aab=_0x5d9bf5[_0x5ddfad(0x1a1)]()[_0x5ddfad(0x212)]();if(_0x47c750[_0x5ddfad(0x1be)]()&&_0x386aab[_0x5ddfad(0x1be)]()){const _0x479d60=_0x47c750,_0x1f8b07=_0x386aab;if(_0x479d60['isMerging']||_0x1f8b07[_0x5ddfad(0x1c6)])return;if(_0x479d60[_0x5ddfad(0x1eb)]===_0x1f8b07[_0x5ddfad(0x1eb)]){const _0x9e8e94=parseInt(_0x479d60[_0x5ddfad(0x1eb)][_0x5ddfad(0x1de)]('-')[0x1],0xa);_0x479d60['isMerging']=!![],_0x1f8b07[_0x5ddfad(0x1c6)]=!![];if(_0x9e8e94===planets['length']-0x1)mergeQueue['push']({'planetA':_0x479d60,'planetB':_0x1f8b07,'nextIndex':null});else _0x9e8e94<planets[_0x5ddfad(0x1e9)]-0x1&&mergeQueue[_0x5ddfad(0x17e)]({'planetA':_0x479d60,'planetB':_0x1f8b07,'nextIndex':_0x9e8e94+0x1});}}});function update(){const _0x552715=_0x870b4;world[_0x552715(0x1ed)](0x1/0x3c);while(mergeQueue[_0x552715(0x1e9)]>0x0){const {planetA:_0x6575c3,planetB:_0x27e15a,nextIndex:_0x2cb651}=mergeQueue[_0x552715(0x175)]();_0x2cb651===null?(world[_0x552715(0x179)](_0x6575c3),world['destroyBody'](_0x27e15a),planetsList[_0x552715(0x187)](planetsList['indexOf'](_0x6575c3),0x1),planetsList[_0x552715(0x187)](planetsList[_0x552715(0x1d8)](_0x27e15a),0x1)):mergePlanets(_0x6575c3,_0x27e15a,_0x2cb651),_0x6575c3[_0x552715(0x1c6)]=![],_0x27e15a['isMerging']=![];}planetsList['forEach'](_0x2f90af=>{const _0x66c6de=_0x552715;_0x2f90af[_0x66c6de(0x1d4)]()['y']<0x0&&world[_0x66c6de(0x179)](_0x2f90af);}),checkGameOver(),requestAnimationFrame(update);}const planetsList=[];let isGameOver=![];function endGame(){if(isGameOver)return;isGameOver=!![],showGameOverPopup();}updateScore(0x0),render(),update();